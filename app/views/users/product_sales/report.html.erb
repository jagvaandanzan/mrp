<% content_for :stylesheets do -%>
  <%= stylesheet_link_tag "search" %>
  <%= stylesheet_link_tag "list" %>
<% end %>
<div class="content-wrapper">
  <div class=" m-t-10 m-b-10">
    <%= form_with url: excel_users_product_sales_path, method: "post", class: "", local: true do |f| %>
      <div class="col-md-12">
        <div class="col-md-4">
          <div><%= "Жагсаалтын төрөл" %></div>
          <div class="search m-t-5">
            <div id="search-date" class="form-control search">
              <i class="fa fa-calendar fa-lg p-r-0"></i>
              <span><%= t("filters.by_date") %>...</span>
              <%= f.hidden_field :start, value: @start %>
              <%= f.hidden_field :finish, value: @finish %>
            </div>
          </div>
        </div>
        <div class="col-md-4 ">
          <div><%= "Жагсаалтын төрөл" %></div>
          <div class="search">
            <%= f.collection_select :salesman_id, Salesman.all, :id, :full_name, { :include_blank => t('activerecord.attributes.bank_transaction.salesman_id'), selected: @salesman_id },
                                    { class: 'form-control selectpicker', "data-live-search": true } %>
          </div>
        </div>
        <div class="col-md-4 ">
          <div><%= "Жагсаалтын төрөл" %></div>
          <div class="search">
            <%= f.collection_select :operator_id, Operator.order_name, :id, :operator_name, { :include_blank => t('titles.operator'), selected: @operator_id },
                                    { class: 'form-control selectpicker', "data-live-search": true } %>
          </div>
        </div>
      </div>
      <div class="col-md-12 m-t-10">
        <div class="col-md-4 ">
          <div><%= "Жагсаалтын төрөл" %></div>
          <div class="search m-t-5">
            <%= select_tag :list_type, options_for_select([["Жагсаалтын төрөл сонгох", ""], ["Захиалгаар", 0], ["Бараагаар", 1]], @List_type), class: 'form-control', id: "list-type-select" %>
          </div>
        </div>
        <div class="col-md-4" id="product-code-div" hidden>
          <div><%= "Барааны код" %></div>
          <div class="search m-t-5">
            <div class="search">
              <%= f.collection_select :product_code, Product.order_by_name, :id, :code, { :include_blank => "Барааны код", selected: @product_code },
                                      { class: 'form-control selectpicker',id: "product-code", "data-live-search": true } %>
            </div>
          </div>
        </div>
      </div>
      <div class="col-md-12 m-t-10">
        <div class="col-md-4 ">
          <div><%= "Захиалгын эх үүсвэр" %></div>
          <div class="search m-t-5">
            <%= select_tag :order_source, options_for_select([["Бүгд", ""], ["Вэб", 0], ["Коммэнт", 1], ["Оператор", 2]], @order_source), class: 'form-control' %>
          </div>
        </div>
        <div class="col-md-4 ">
          <div><%= "Харилцагч" %></div>
          <div class="search m-t-5">
            <%= f.collection_select :customer_id, Customer.order_by_name, :id, :name, { :include_blank => "Харилцагч", selected: @customer_id },
                                    { class: 'form-control selectpicker', "data-live-search": true } %>
          </div>
        </div>
        <div class="col-md-4 ">
          <div><%= "Борлуулатын төрөл" %></div>
          <div class="search m-t-5">
            <%= select_tag :sale_type, options_for_select([["Бүгд", ""], ["Борлуулалт", 0], ["Солилт", 1], ["Буцаалт", 2], ["Гомдол", 3]], @sale_type), class: 'form-control' %>

          </div>
        </div>
      </div>
      <div class="col-md-12 m-t-10">
        <div><%= "Статус" %></div>
        <% @opers.each { |oper| %>
          <div class="col-md-2">
            <div class="checkbox" style="position: relative; display: block; overflow: hidden; height: 20px;">
              <%= label_tag do %>
                <%= f.check_box(:oper_rels, { :multiple => true }, oper.id.to_s, nil) %>
                <%= oper.name %>
              <% end %>
            </div>
          </div>
        <% } %>
      </div>
      <div class="col-md-12 m-t-10">
        <div><%= "Дэд статус амжилтгүй опэратороос" %></div>
        <% @sales.each { |sale| %>
          <div class="col-md-2">
            <div class="checkbox" style="position: relative; display: block; overflow: hidden; height: 20px;">
              <%= label_tag do %>
                <%= f.check_box(:sale_rels, { :multiple => true }, sale.id.to_s, nil) %>
                <%= sale.name %>
              <% end %>
            </div>
          </div>
        <% } %>
      </div>
      <div class="col-md-12 m-t-10">
        <div><%= "Дэд статус амжилтгүй хүргэлтийн ажилтан" %></div>
        <% @others.each { |other| %>
          <div class="col-md-2">
            <div class="checkbox" style="position: relative; display: block; overflow: hidden; height: 20px;">
              <%= label_tag do %>
                <%= f.check_box(:other_rels, { :multiple => true }, other.id.to_s, nil) %>
                <%= other.name %>
              <% end %>
            </div>
          </div>
        <% } %>
      </div>
      <div class="search m-r-20">
        <%= submit_tag t('controls.button.download'), :class => 'btn blck-btn right' %>
      </div>
    <% end %>
  </div>

</div>
<%= render 'shared/date-range', search_field_id: 'search-date', start_id: 'start', finish_id: 'finish' %>
<%= render 'shared/form_modal', title: t('activerecord.models.sale_tax'), modal_class: '' %>
<style>
    .to_tax {
        background-color: #97eeb8;
    }

    .cursor {
        cursor: pointer;
    }
</style>
<script type="text/javascript" charset="utf-8">
    $(document).ready(function () {
        $('#list-type-select').on('click', function () {
            if ($(this).val() == 1)
                $('#product-code-div').show()
            else {
                $('#product-code-div').hide()
            }
        });
    });
</script>