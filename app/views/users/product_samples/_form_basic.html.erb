<%= form_with model: @product_sample, url: @product_sample.persisted? ? users_product_sample_path : users_product_samples_path,
              method: @product_sample.persisted? ? :patch : :post, local: true, :html => {class: 'form-horizontal'} do |f| %>
  <%= form_body do %>
    <div class="col-md-12">
      <div class="row">
        <div class="col-md-4">
          <%= f.label :code, class: 'control-label' %>
          <div class="<%= get_error_class(@product_sample, :code) %>">
            <%= field_errors(@product_sample, :code) %>
            <%= f.text_field :code, class: 'form-control', placeholder: t('activerecord.attributes.product_sample.code') %>
          </div>
        </div>
        <div class="col-md-4">
          <%= f.label :ordered_date, class: 'control-label' %>
          <div class="input-append input-group date <%= get_error_class(@product_sample, :ordered_date) %>" data-provide="datepicker">
            <%= field_errors(@product_sample, :ordered_date) %>
            <%= f.text_field :ordered_date, value: @product_sample.ordered_date.strftime('%F'), class: 'field form-control', placeholder: t('activerecord.attributes.product_sample.ordered_date') %>
            <div class="input-group-addon">
              <i class="fa fa-calendar"></i>
            </div>
          </div>
        </div>
        <div class="col-md-4 field_div">
          <%= f.label :supplier_id, class: 'control-label' %>
          <div class="<%= get_error_class(@product_sample, :supplier_id) %>">
            <%= field_errors(@product_sample, :supplier_id) %>
            <%= f.collection_select :supplier_id, ProductSupplier.search(""), :id, :name, {}, {class: 'form-control'} %>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-12">
      <div class="row">
        <div class="col-md-4 field_div">
          <%= f.label :payment, class: 'control-label' %>
          <div class="<%= get_error_class(@product_sample, :payment) %>">
            <%= field_errors(@product_sample, :payment) %>
            <%= f.select :payment, ProductSample.payments_i18n.keys.map {|k| [ProductSample.payments_i18n[k], k]},
                         {:prompt => t('controls.select.none')}, {class: 'form-control'} %>
          </div>
        </div>
        <div class="col-md-4 field_div">
          <%= f.label :exchange, class: 'control-label' %>
          <div class="<%= get_error_class(@product_sample, :exchange) %>">
            <%= field_errors(@product_sample, :exchange) %>
            <%= f.select :exchange, ProductSample.exchanges_i18n.keys.map {|k| [ProductSample.exchanges_i18n[k], k]},
                         {}, {class: 'form-control'} %>
          </div>
        </div>
        <div class="col-md-4">
          <%= f.label :exchange_value, class: 'control-label' %>
          <div class="<%= get_error_class(@product_sample, :exchange_value) %>">
            <%= field_errors(@product_sample, :exchange_value) %>
            <%= f.number_field :exchange_value, class: 'form-control', min: 0, step: 0.01 %>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-12 field_div">
      <%= f.label :product_supply_order_items, class: 'control-label' %>

      <div class="cocoon-nested-form">
        <div class="<%= get_error_class(@product_sample, :product_supply_order_items) %>">
          <%= field_errors(@product_sample, :product_supply_order_items) %>
          <table class="table table-bordered" id="tb_product_supply_order_items">
            <tr>
              <th><%= t('activerecord.attributes.product_supply_order_item.product_id') %></th>
              <th><%= t('activerecord.attributes.product_supply_order_item.link') %></th>
              <th><%= t('activerecord.attributes.product_supply_order_item.note') %></th>
              <th><%= t('activerecord.attributes.product_supply_order_item.image') %></th>
              <th width="50px"></th>
            </tr>
            <%= f.fields_for :product_supply_order_items do |m| %>
              <%= render 'product_supply_order_item_fields', :f => m, is_sample: true %>
            <% end %>
          </table>
        </div>
        <div class="links item_append">
          <%= link_to_add_association f, :product_supply_order_items, data: {association_insertion_node: '#tb_product_supply_order_items', association_insertion_method: :append} do %>
            <%= nested_add_btn %>
          <% end %>
        </div>
      </div>
    </div>
    <div class="action-buttons">
      <%= f.submit t('controls.button.save'), class: 'btn btn-warning' %>
    </div>
  <% end %>
<% end %>